
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ug Nep - Supplementary Iind Semester Roll-2023</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f3f4f6;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0,0,0);
            background-color: rgba(0,0,0,0.4);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 400px;
            text-align: center;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4">
    <div class="container mx-auto p-8 bg-white shadow-xl rounded-2xl">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">Ug Nep - Supplementary Iind Semester Roll-2023</h1>
        <a href="index.html" class="inline-block bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-xl mb-6 transition duration-300">
            &larr; Back to Home
        </a>
        <input type="text" id="searchInput" oninput="filterTable()" placeholder="Search courses..." class="w-full p-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        <div class="overflow-x-auto relative shadow-md sm:rounded-lg">
            <table class="w-full text-sm text-left text-gray-500">
                <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                    <tr>
                        <th scope="col" class="py-3 px-6">S.NO.</th>
                        <th scope="col" class="py-3 px-6">Courses</th>
                        <th scope="col" class="py-3 px-6">Actions</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
            
                    <tr class="bg-white border-b hover:bg-gray-50">
                        <td class="py-4 px-6 font-medium text-gray-900 whitespace-nowrap">1</td>
                        <td class="py-4 px-6 course-name">BACHELOR OF ARTS (B.A.)</td>
                        <td class="py-4 px-6">
                            <button onclick="showResultModal('QkFDSEVMT1IgT0YgQVJUUyAoQi5BLik=')" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-xl transition duration-300">
                                GET RESULT
                            </button>
                        </td>
                    </tr>
                
                    <tr class="bg-white border-b hover:bg-gray-50">
                        <td class="py-4 px-6 font-medium text-gray-900 whitespace-nowrap">2</td>
                        <td class="py-4 px-6 course-name">BACHELOR OF COMMERCE (B.COM)</td>
                        <td class="py-4 px-6">
                            <button onclick="showResultModal('QkFDSEVMT1IgT0YgQ09NTUVSQ0UgKEIuQ09NKQ==')" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-xl transition duration-300">
                                GET RESULT
                            </button>
                        </td>
                    </tr>
                
                    <tr class="bg-white border-b hover:bg-gray-50">
                        <td class="py-4 px-6 font-medium text-gray-900 whitespace-nowrap">3</td>
                        <td class="py-4 px-6 course-name">BACHELOR OF SCIENCE (B.Sc.)</td>
                        <td class="py-4 px-6">
                            <button onclick="showResultModal('QkFDSEVMT1IgT0YgU0NJRU5DRSAoQi5TYy4p')" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-xl transition duration-300">
                                GET RESULT
                            </button>
                        </td>
                    </tr>
                
                </tbody>
            </table>
        </div>
    </div>

    <div id="resultModal" class="modal">
        <div class="modal-content">
            <h2 class="text-xl font-bold mb-4">Enter Student Roll No.</h2>
            <p id="validationMessage" class="text-sm text-red-500 mb-2"></p>
            <input type="text" id="rollNoInput" class="w-full p-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g., 23040100410075">
            <button onclick="validateAndRedirect()" class="bg-blue-600 text-white font-bold py-2 px-6 rounded-xl hover:bg-blue-700 transition duration-300">
                SHOW RESULTS
            </button>
            <button onclick="closeModal()" class="bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-xl hover:bg-gray-500 transition duration-300 mt-2">
                Cancel
            </button>
        </div>
    </div>

    <script>
        let classId = '';
        const modal = document.getElementById('resultModal');
        const rollNoInput = document.getElementById('rollNoInput');
        const validationMessage = document.getElementById('validationMessage');

        function showResultModal(id) {
            classId = id;
            modal.style.display = "flex";
            rollNoInput.value = '';
            validationMessage.textContent = '';
        }

        function closeModal() {
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                closeModal();
            }
        }

        function base64Encode(str) {
            return btoa(str);
        }

        function validateAndRedirect() {
            const rollNo = rollNoInput.value;
            validationMessage.textContent = '';

            // Validation logic
            if (!/^\d{14}$/.test(rollNo)) {
                validationMessage.textContent = "Roll No. must be 14 digits.";
                return;
            }
            if (!rollNo.startsWith('23')) {
                validationMessage.textContent = "Roll No. must start with '23'.";
                return;
            }

            // Constructing the URL based on the provided logic
            const rollNoBase = rollNo.slice(0, 12) + '01';
            const rollNoBaseEncoded = base64Encode(rollNoBase);

            let encodedPart = '';
            const sixthDigit = rollNo.charAt(6);
            if (sixthDigit === '0') {
                const partToEncode = rollNo.substring(7, 10);
                encodedPart = base64Encode(partToEncode);
            } else {
                const partToEncode = rollNo.substring(6, 10);
                encodedPart = base64Encode(partToEncode);
            }

            // Construct the final URL and correctly encode it
            const finalUrl = `https://result25.rmlauexams.in/Marks_Sheet/UG_NEPIV/print.aspx?Roll_no=${rollNoBaseEncoded}&Col=${encodedPart}&Class=${classId}`;
            const encodedFinalUrl = encodeURIComponent(finalUrl);

            // Open the new page with the correctly encoded URL
            window.open(`https://realsaanvi.github.io/rmlau/Pages/getdata.html?url=${encodedFinalUrl}`, '_blank');
            closeModal();
        }

        // JavaScript for client-side search on the table
        function filterTable() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toLowerCase();
            const tableBody = document.getElementById('tableBody');
            const rows = tableBody.getElementsByTagName('tr');

            for (let i = 0; i < rows.length; i++) {
                const courseCell = rows[i].getElementsByClassName('course-name')[0];
                const courseText = courseCell.textContent || courseCell.innerText;
                if (courseText.toLowerCase().indexOf(filter) > -1) {
                    rows[i].style.display = "";
                } else {
                    rows[i].style.display = "none";
                }
            }
        }
    </script>
</body>
</html>
